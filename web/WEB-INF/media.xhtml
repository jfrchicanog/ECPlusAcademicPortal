<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <ui:component>
            <h:panelGroup rendered="#{content.esPictograma(recurso)}" layout="block" >
                <object onload="recalcula(event)" width="100%" type="image/svg+xml" data="#{content.getPictogramaURL(recurso.getFichero(resolucion))}">
                    Your browser does not support SVG
                </object>

            </h:panelGroup>
            <h:graphicImage rendered="#{content.esFoto(recurso)}" value="#{content.getImageURL(recurso.getFichero(resolucion))}" width="90%"/>
            <h:panelGroup rendered="#{content.esVideo(recurso)}" layout="block">
                <video id="video" width="90%" controls="controls">
                    <source src="#{content.getVideoURL(recurso.getFichero(resolucion))}" type="video/mp4" />
                </video>
            </h:panelGroup>

            <h:outputScript>

                function recalcula(event) {
                var svgDoc = event.currentTarget.contentDocument;
                var svg = svgDoc.getElementsByTagName("svg")[0];
                svg.viewBox.baseVal.x = svg.getBBox().x;
                svg.viewBox.baseVal.width = svg.getBBox().width;
                svg.viewBox.baseVal.y = svg.getBBox().y;
                svg.viewBox.baseVal.height = svg.getBBox().height;
                }

            </h:outputScript>
        </ui:component>
    </h:body>
</html>

